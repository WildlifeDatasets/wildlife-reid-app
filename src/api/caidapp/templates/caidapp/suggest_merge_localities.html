{% extends "base.html" %}

{% block content %}
  <h1>Merge Localities Suggestions</h1>

  {% if suggestions %}
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <a class="link-secondary" href="{% url 'caidapp:localities' %}">
            <i class="bi bi-geo-alt"></i> Localities
          </a>
        </div>
        <div>
          <i class="bi bi-geo-alt"></i>
          {% if count_of_localities %}
            Count: {{ count_of_localities }}
          {% endif %}
        </div>
      <div>
        <a class="btn btn-secondary" href="{% url 'caidapp:refresh_merge_localities_suggestions' %}">
          <i class="bi bi-arrow-clockwise"></i>
          Refresh
        </a>
      </div>
      </div>
      <ul class="list-group">
      {% for locality1, locality2, distance in suggestions %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <a href="{% url 'caidapp:update_locality' locality1.id %}" class="link-secondary">
          {{ locality1.name }}
                </a>
                =>
            <a href="{% url 'caidapp:update_locality' locality2.id %}" class="link-secondary">
                {{ locality2.name }}
            </a>

            <div>
                <div class="d-flex align-items-center">
                    <div class="me-5">
                        distance: {{ distance }}
                    </div>
          <a class="btn btn-secondary" href="{% url 'caidapp:merge_localities' locality1.id locality2.id %}"
          onclick="return confirm('Are you sure you want to merge {{ locality1.name }} into {{ locality2.name }}?');"
          >Merge</a>
            </div>
        </li>
      {% endfor %}
      </ul>


  {% endif %}
{% endblock %}